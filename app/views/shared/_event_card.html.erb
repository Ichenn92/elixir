<span class="anchor" id="event-<%= event.id %>"></span>
<li>
    <% bookingDB = event.bookings.find_by(user: current_user) %>
    <% booking_confirmed = !bookingDB.nil? && bookingDB.confirmed? ? "active" : "" %>
    <% booking = bookingDB unless bookingDB.nil? %>

    <div class="d-flex">
    
        <div class="flex-grow-1">
            <%= form_for booking, remote: true do |f| %>
                <% if booking.user.nil? %>
                    <%= f.hidden_field :booking, value: booking.id %>
                <% end %>
                <%= f.hidden_field :event, value: event.id %>
                <%= button_tag(type: 'submit', class: "text-center button-outline-green w-100 #{booking_confirmed}") do %>
                    <div class="d-flex justify-content-between align-items-center">
                        <div class="text-left">
                            <% if !booking.id.nil? && booking.confirmed? %>
                                <span class="badge badge-light" style="color:#00796B; background-color:#E0F2F1;">Inscrit</span>
                            <% end %>
                            <% if event.end_time.day == event.start_time.day %>
                                <% duration = event.end_time - event.start_time %>
                                <span class="badge badge-light" style="color:#00796B; background-color:#E0F2F1;">Durée : <%= Time.at(duration).strftime("%Hh%M") %></span>
                                <div>
                                    <span><%= event.start_time.strftime("Date : %d.%m.%Y") %></span>
                                </div>
                                <div>
                                    <span><%= event.start_time.strftime("Horaire : %Hh%M ") %></span>
                                    <span><%= event.end_time.strftime("à %Hh%M") %></span>
                                </div>
                            <% else %>
                                <span class="badge badge-primary">Plusieurs jours</span>
                                <div>
                                    <span><%= event.start_time.strftime("Du %d.%m.%Y à %Hh%M") %></span>
                                </div>
                                <div>
                                    <span><%= event.end_time.strftime("Au %d.%m.%Y à %Hh%M") %></span>
                                </div>
                            <% end %>
                        </div>
                        <span><i class="far fa-calendar-check"></i></span>
                    </div>
                <% end %>
            <% end %>
        </div>


        <div class="ml-2 d-flex flex-column justify-content-center align-items-center button-outline-green">
            <i class="fas fa-users text-medium"></i>
        </div>
    </div>
</li>

